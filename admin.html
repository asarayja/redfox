<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redfox Admin Panel</title>
    <link href="https://fonts.cdnfonts.com/css/comic-sans-ms" rel="stylesheet">
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <div id="loginScreen" class="screen">
        <div class="login-container">
            <h1>ğŸ¦Š Redfox Admin Login</h1>
            <div class="login-form">
                <input type="text" id="adminUsername" placeholder="Brukernavn" onkeypress="handleLoginKeypress(event)">
                <input type="password" id="adminPassword" placeholder="Passord" onkeypress="handleLoginKeypress(event)">
                <button onclick="login()">Logg Inn</button>
                <div id="loginError" class="error"></div>
            </div>
        </div>
    </div>

    <div id="adminPanel" class="screen" style="display: none;">
        <header class="admin-header">
            <h1>ğŸ¦Š Redfox Admin Panel</h1>
            <div class="header-controls">
                <span id="currentUserDisplay" class="user-info"></span>
                <button onclick="previewSite()" class="preview-btn">ğŸ‘ï¸ ForhÃ¥ndsvis Side</button>
                <button onclick="exportData()" class="export-btn">ğŸ’¾ Eksporter Data</button>
                <button onclick="logout()" class="logout-btn">ğŸšª Logg Ut</button>
            </div>
        </header>

        <nav class="admin-nav">
            <button onclick="showAdminSection('content')" class="nav-btn active" id="nav-content">ğŸ“ Innhold</button>
            <button onclick="showAdminSection('music')" class="nav-btn" id="nav-music">ğŸµ Musikk</button>
            <button onclick="showAdminSection('gallery')" class="nav-btn" id="nav-gallery">ğŸ–¼ï¸ Bilder</button>
            <button onclick="showAdminSection('themes')" class="nav-btn" id="nav-themes">ğŸ¨ Temaer</button>
            <button onclick="showAdminSection('pages')" class="nav-btn" id="nav-pages">ğŸ“„ Sider</button>
            <button onclick="showAdminSection('settings')" class="nav-btn" id="nav-settings">âš™ï¸ Innstillinger</button>
        </nav>

        <main class="admin-main">
            <!-- Content Management Section -->
            <section id="admin-content" class="admin-section">
                <h2>ğŸ“ Innholdsbehandling</h2>
                
                <div class="content-tabs">
                    <button onclick="showContentTab('personal')" class="tab-btn active" id="tab-personal">Personlig Profil</button>
                    <button onclick="showContentTab('fursona')" class="tab-btn" id="tab-fursona">Fursona Profil</button>
                </div>

                <!-- Personal Profile Tab -->
                <div id="content-personal" class="content-tab">
                    <h3>Personlig Profil</h3>
                    
                    <!-- SprÃ¥kfaner -->
                    <div class="lang-selector">
                        <button class="lang-btn active" onclick="showPersonalLang('no')" id="personal-lang-no">Norsk</button>
                        <button class="lang-btn" onclick="showPersonalLang('en')" id="personal-lang-en">English</button>
                    </div>

                    <!-- Norsk innhold -->
                    <div id="personal-no" class="lang-content">
                        <h4>Norsk innhold</h4>
                        <div class="form-group">
                            <label>Navn:</label>
                            <input type="text" id="personal-name-no" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Bursdag:</label>
                            <input type="text" id="personal-birthday-no" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Alder:</label>
                            <input type="text" id="personal-age-no" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Interesser:</label>
                            <textarea id="personal-interests-no" class="form-textarea"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Liker:</label>
                            <textarea id="personal-likes-no" class="form-textarea"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Favorittspill:</label>
                            <input type="text" id="personal-favgame-no" class="form-input">
                        </div>
                    </div>

                    <!-- Engelsk innhold -->
                    <div id="personal-en" class="lang-content" style="display: none;">
                        <h4>English content</h4>
                        <div class="form-group">
                            <label>Name:</label>
                            <input type="text" id="personal-name-en" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Birthday:</label>
                            <input type="text" id="personal-birthday-en" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Age:</label>
                            <input type="text" id="personal-age-en" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Interests:</label>
                            <textarea id="personal-interests-en" class="form-textarea"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Likes:</label>
                            <textarea id="personal-likes-en" class="form-textarea"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Favorite game:</label>
                            <input type="text" id="personal-favgame-en" class="form-input">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Profilbilde (filnavn):</label>
                        <input type="text" id="personal-profilePicture" class="form-input" placeholder="f.eks: profile.jpg">
                        <small class="hint">URL genereres automatisk: https://asarayja.github.io/redfox/bilder/[filnavn]</small>
                    </div>
                    <button onclick="savePersonalProfile()" class="save-btn">ğŸ’¾ Lagre Personlig Profil</button>
                </div>

                <!-- Fursona Profile Tab -->
                <div id="content-fursona" class="content-tab" style="display: none;">
                    <h3>Fursona Profil</h3>
                    
                    <!-- SprÃ¥kfaner -->
                    <div class="lang-selector">
                        <button class="lang-btn active" onclick="showFursonaLang('no')" id="fursona-lang-no">Norsk</button>
                        <button class="lang-btn" onclick="showFursonaLang('en')" id="fursona-lang-en">English</button>
                    </div>

                    <!-- Norsk innhold -->
                    <div id="fursona-no" class="lang-content">
                        <h4>Norsk innhold</h4>
                        <div class="form-group">
                            <label>Navn:</label>
                            <input type="text" id="fursona-name-no" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Fursona:</label>
                            <input type="text" id="fursona-type-no" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Opprinnelse:</label>
                            <input type="text" id="fursona-origin-no" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Egenskaper:</label>
                            <textarea id="fursona-traits-no" class="form-textarea"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Bakgrunn:</label>
                            <textarea id="fursona-story-no" class="form-textarea"></textarea>
                        </div>
                    </div>

                    <!-- Engelsk innhold -->
                    <div id="fursona-en" class="lang-content" style="display: none;">
                        <h4>English content</h4>
                        <div class="form-group">
                            <label>Name:</label>
                            <input type="text" id="fursona-name-en" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Fursona:</label>
                            <input type="text" id="fursona-type-en" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Origin:</label>
                            <input type="text" id="fursona-origin-en" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Traits:</label>
                            <textarea id="fursona-traits-en" class="form-textarea"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Background:</label>
                            <textarea id="fursona-story-en" class="form-textarea"></textarea>
                        </div>
                    </div>

                    <button onclick="saveFursonaProfile()" class="save-btn">ğŸ’¾ Lagre Fursona Profil</button>
                </div>
            </section>

            <!-- Music Management Section -->
            <section id="admin-music" class="admin-section" style="display: none;">
                <h2>ğŸµ Musikkbehandling</h2>
                
                <div class="music-controls">
                    <button onclick="addNewAlbum()" class="add-btn">â• Nytt Album</button>
                </div>

                <div id="albumList" class="album-list">
                    <!-- Albums will be dynamically loaded here -->
                </div>
            </section>

            <!-- Gallery Management Section -->
            <section id="admin-gallery" class="admin-section" style="display: none;">
                <h2>ğŸ–¼ï¸ BildehÃ¥ndtering</h2>
                
                <div class="gallery-controls">
                    <button onclick="addNewImage()" class="add-btn">â• Nytt Bilde</button>
                </div>

                <div id="imageList" class="image-list">
                    <!-- Images will be dynamically loaded here -->
                </div>
            </section>

            <!-- Theme Management Section -->
            <section id="admin-themes" class="admin-section" style="display: none;">
                <h2>ğŸ¨ TemahÃ¥ndtering</h2>
                
                <div class="theme-controls">
                    <button onclick="addNewTheme()" class="add-btn">â• Nytt Tema</button>
                    <select id="activeThemeSelect" onchange="setActiveTheme()">
                        <option value="">Velg aktivt tema</option>
                    </select>
                </div>

                <div id="themeList" class="theme-list">
                    <!-- Themes will be dynamically loaded here -->
                </div>
            </section>

            <!-- Page Management Section -->
            <section id="admin-pages" class="admin-section" style="display: none;">
                <h2>ğŸ“„ SidehÃ¥ndtering</h2>
                
                <div class="info-box" style="background: #f0f8ff; border: 1px solid #a70101; padding: 15px; margin-bottom: 20px; border-radius: 8px;">
                    <h4 style="margin: 0 0 10px 0; color: #a70101;">â„¹ï¸ Informasjon</h4>
                    <p style="margin: 0; color: #333;">
                        Standardsidene (Om Meg, Musikk, Bilder) hÃ¥ndteres via egne faner og vises ikke her. 
                        Her kan du opprette og administrere tilpassede sider som vil vises i navigasjonsmenyen.
                    </p>
                </div>
                
                <div class="page-controls">
                    <button onclick="addNewPage()" class="add-btn">â• Ny Side</button>
                </div>

                <div id="pageList" class="page-list">
                    <!-- Pages will be dynamically loaded here -->
                </div>
            </section>

            <!-- Settings Section -->
            <section id="admin-settings" class="admin-section" style="display: none;">
                <h2>âš™ï¸ Innstillinger</h2>
                
                <div class="settings-group">
                    <h3>Sikkerhet</h3>
                    <p><strong>Innlogget bruker:</strong> <span id="currentUserSettings">-</span></p>
                    <div class="form-group">
                        <label>Endre Brukernavn:</label>
                        <input type="text" id="newUsername" class="form-input" placeholder="Nytt brukernavn">
                        <button onclick="changeUsername()" class="save-btn">Endre Brukernavn</button>
                    </div>
                    <div class="form-group">
                        <label>Endre Passord:</label>
                        <input type="password" id="newPassword" class="form-input" placeholder="Nytt passord">
                        <button onclick="changePassword()" class="save-btn">Endre Passord</button>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Import/Export</h3>
                    <div class="form-group">
                        <label>Importer Data:</label>
                        <input type="file" id="importFile" accept=".json" onchange="importData()">
                        <button onclick="exportData()" class="save-btn">Eksporter All Data</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <div id="albumModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('albumModal')">&times;</span>
            <h3 id="albumModalTitle">Rediger Album</h3>
            <div class="form-group">
                <label>Album Navn (brukes i URL, f.eks: Redfox_Full_Rulle):</label>
                <input type="text" id="albumName" class="form-input" placeholder="Redfox_Full_Rulle">
                <small style="color: #999;">URL vil bli: https://asarayja.github.io/redfox/Redfox/[Album_Navn]/</small>
            </div>
            <div class="form-group">
                <label>Album Tittel (Norsk):</label>
                <input type="text" id="albumTitleNo" class="form-input">
            </div>
            <div class="form-group">
                <label>Album Tittel (Engelsk):</label>
                <input type="text" id="albumTitleEn" class="form-input">
            </div>
            <div class="form-group">
                <label>Sanger:</label>
                <div id="songList" class="song-list"></div>
                <button onclick="addSong()" class="add-btn">â• Legg til sang</button>
            </div>
            <div class="modal-actions">
                <button onclick="saveAlbum()" class="save-btn">ğŸ’¾ Lagre</button>
                <button onclick="closeModal('albumModal')" class="cancel-btn">Avbryt</button>
            </div>
        </div>
    </div>

    <div id="imageModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('imageModal')">&times;</span>
            <h3 id="imageModalTitle">Rediger Bilde</h3>
            <div class="form-group">
                <label>Bildefil (kun filnavn, f.eks: redfox.png):</label>
                <input type="text" id="imageFileName" class="form-input" placeholder="redfox.png">
                <small style="color: #999;">Bildet vil bli lagt til: https://asarayja.github.io/redfox/bilder/</small>
            </div>
            <div class="form-group">
                <label>Alt tekst:</label>
                <input type="text" id="imageAlt" class="form-input">
            </div>
            <div class="form-group">
                <label>Bildetekst (Norsk):</label>
                <input type="text" id="imageCaptionNo" class="form-input">
            </div>
            <div class="form-group">
                <label>Bildetekst (Engelsk):</label>
                <input type="text" id="imageCaptionEn" class="form-input">
            </div>
            <div class="modal-actions">
                <button onclick="saveImage()" class="save-btn">ğŸ’¾ Lagre</button>
                <button onclick="closeModal('imageModal')" class="cancel-btn">Avbryt</button>
            </div>
        </div>
    </div>

    <div id="themeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('themeModal')">&times;</span>
            <h3 id="themeModalTitle">Rediger Tema</h3>
            <div class="form-group">
                <label>Tema Navn (Norsk):</label>
                <input type="text" id="themeNameNo" class="form-input">
            </div>
            <div class="form-group">
                <label>Tema Navn (English):</label>
                <input type="text" id="themeNameEn" class="form-input">
            </div>
            <div class="theme-editor">
                <div class="color-group">
                    <h4>Farger</h4>
                    <div class="form-group">
                        <label>Bakgrunnsfarge:</label>
                        <input type="color" id="themeBackground" class="color-input">
                    </div>
                    <div class="form-group">
                        <label>Tekst farge:</label>
                        <input type="color" id="themeTextColor" class="color-input">
                    </div>
                    <div class="form-group">
                        <label>Header farge:</label>
                        <input type="color" id="themeHeaderColor" class="color-input">
                    </div>
                    <div class="form-group">
                        <label>Accent farge:</label>
                        <input type="color" id="themeAccentColor" class="color-input">
                    </div>
                    <div class="form-group">
                        <label>Navigasjon farge:</label>
                        <input type="color" id="themeNavColor" class="color-input">
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button onclick="saveTheme()" class="save-btn">ğŸ’¾ Lagre</button>
                <button onclick="closeModal('themeModal')" class="cancel-btn">Avbryt</button>
            </div>
        </div>
    </div>

    <div id="pageModal" class="modal">
        <div class="modal-content large-modal">
            <span class="close" onclick="closeModal('pageModal')">&times;</span>
            <h3 id="pageModalTitle">Rediger Side</h3>
            <div class="form-group">
                <label>Side Navn (URL-vennlig, f.eks: kontakt):</label>
                <input type="text" id="pageName" class="form-input" placeholder="kontakt">
            </div>
            <div class="form-group">
                <label>Side Tittel (Norsk):</label>
                <input type="text" id="pageTitleNo" class="form-input">
            </div>
            <div class="form-group">
                <label>Side Tittel (Engelsk):</label>
                <input type="text" id="pageTitleEn" class="form-input">
            </div>
            
            <!-- Norwegian Content Editor -->
            <div class="form-group">
                <label>Innhold (Norsk):</label>
                <div class="text-editor">
                    <div class="editor-toolbar">
                        <button type="button" onclick="formatText('pageContentNo', 'bold')" class="format-btn"><b>B</b></button>
                        <button type="button" onclick="formatText('pageContentNo', 'italic')" class="format-btn"><i>I</i></button>
                        <select onchange="formatText('pageContentNo', 'heading', this.value)" class="format-select">
                            <option value="">Normal tekst</option>
                            <option value="h1">Overskrift 1</option>
                            <option value="h2">Overskrift 2</option>
                            <option value="h3">Overskrift 3</option>
                        </select>
                        <select onchange="formatText('pageContentNo', 'fontSize', this.value)" class="format-select">
                            <option value="">Normal stÃ¸rrelse</option>
                            <option value="small">Liten</option>
                            <option value="large">Stor</option>
                            <option value="x-large">Ekstra stor</option>
                        </select>
                        <button type="button" onclick="insertImage('pageContentNo')" class="format-btn">ğŸ–¼ï¸ Bilde</button>
                    </div>
                    <textarea id="pageContentNo" class="form-textarea large content-editor"></textarea>
                </div>
                <div class="content-preview" id="previewNo" style="display: none;"></div>
                <button type="button" onclick="togglePreview('No')" class="preview-btn">ğŸ‘ï¸ ForhÃ¥ndsvis</button>
            </div>
            
            <!-- English Content Editor -->
            <div class="form-group">
                <label>Innhold (Engelsk):</label>
                <div class="text-editor">
                    <div class="editor-toolbar">
                        <button type="button" onclick="formatText('pageContentEn', 'bold')" class="format-btn"><b>B</b></button>
                        <button type="button" onclick="formatText('pageContentEn', 'italic')" class="format-btn"><i>I</i></button>
                        <select onchange="formatText('pageContentEn', 'heading', this.value)" class="format-select">
                            <option value="">Normal text</option>
                            <option value="h1">Heading 1</option>
                            <option value="h2">Heading 2</option>
                            <option value="h3">Heading 3</option>
                        </select>
                        <select onchange="formatText('pageContentEn', 'fontSize', this.value)" class="format-select">
                            <option value="">Normal size</option>
                            <option value="small">Small</option>
                            <option value="large">Large</option>
                            <option value="x-large">Extra large</option>
                        </select>
                        <button type="button" onclick="insertImage('pageContentEn')" class="format-btn">ğŸ–¼ï¸ Image</button>
                    </div>
                    <textarea id="pageContentEn" class="form-textarea large content-editor"></textarea>
                </div>
                <div class="content-preview" id="previewEn" style="display: none;"></div>
                <button type="button" onclick="togglePreview('En')" class="preview-btn">ğŸ‘ï¸ Preview</button>
            </div>
            
            <div class="modal-actions">
                <button onclick="savePage()" class="save-btn">ğŸ’¾ Lagre</button>
                <button onclick="closeModal('pageModal')" class="cancel-btn">Avbryt</button>
            </div>
        </div>
    </div>

    <script src="admin.js"></script>
    <script>
        // Check for active session on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkSession();
        });
    </script>
</body>
</html>
